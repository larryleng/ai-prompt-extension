# 数据源切换功能使用说明

## 🎯 功能概述

数据源切换功能允许用户在**云端模板**和**本地自定义模板**之间自由切换，为AI提示词生成提供更灵活的选择。

## 🔧 使用方法

### 1. 切换数据源

在主页面右上角找到"云端模板"复选框：
- ✅ **勾选**：使用云端数据库中的模板（默认）
- ❌ **取消勾选**：使用本地自定义模板

### 2. 编辑本地模板

1. 点击页面底部的"自定义"按钮进入模板管理页面
2. 选择"图片模板"或"视频模板"标签页
3. 在文本框中输入您的自定义提示词模板
4. 点击保存按钮保存模板

### 3. 模板格式说明

**本地模板内容**应该是纯文本格式的提示词模板，例如：
```
请根据以下描述生成高质量的AI绘图提示词：{用户输入}

要求：
1. 包含详细的视觉描述
2. 添加适当的艺术风格
3. 确保提示词清晰准确
```

## 🧪 测试功能

### 清除测试数据
如果之前有测试数据影响正常使用，可以在浏览器控制台中运行：
```javascript
clearTestData()  // 清除所有测试数据
```

### 检查当前状态
```javascript
checkCurrentStorage()  // 查看当前本地存储状态
checkTemplateStatus()  // 查看模板状态（如果测试工具已加载）
```

## 📋 工作流程

1. **云端模式**（默认）：
   - 系统从Supabase数据库获取预设的模板配置
   - 包含丰富的风格、美学、材质等选项

2. **本地模式**：
   - 系统使用用户在模板管理页面自定义的模板
   - 完全由用户控制模板内容和格式

3. **自动切换**：
   - 用户可以随时通过复选框切换数据源
   - 无需刷新页面，立即生效

## ⚠️ 注意事项

1. **本地模板为空时**：如果选择本地模式但没有设置自定义模板，系统会使用默认的简单模板
2. **数据格式兼容**：系统会自动处理不同格式的模板数据，确保兼容性
3. **实时切换**：切换数据源后，下次生成提示词时会立即使用新的数据源

## 🔍 故障排除

如果遇到问题：
1. 检查浏览器控制台是否有错误信息
2. 确认模板管理页面中的模板内容已正确保存
3. 尝试清除测试数据后重新设置模板
4. 刷新页面重新加载所有模块